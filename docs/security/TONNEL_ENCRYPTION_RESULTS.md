# –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è TonnelAccount

## –î–∞—Ç–∞: 2024-12-02
## –°—Ç–∞—Ç—É—Å: ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –ì–û–¢–û–í–û –ö PRODUCTION

---

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã

### 1. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü Tonnel –≤ –ë–î ‚úÖ

**–ú–∏–≥—Ä–∞—Ü–∏—è:** `merge_tonnel_001`

**–°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
- `tonnel_accounts` - –∞–∫–∫–∞—É–Ω—Ç—ã Tonnel Market —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º auth_data
- `tonnel_nfts` - NFT –Ω–∞ Tonnel Market
- `tonnel_offers` - –æ—Ñ—Ñ–µ—Ä—ã –Ω–∞ Tonnel Market
- `tonnel_activities` - –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞ Tonnel Market
- `tonnel_balances` - –±–∞–ª–∞–Ω—Å—ã –Ω–∞ Tonnel Market

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ tonnel_accounts:**
```sql
CREATE TABLE tonnel_accounts (
    id SERIAL PRIMARY KEY,
    user_id BIGINT REFERENCES users(id) ON DELETE CASCADE,
    account_id VARCHAR(255) REFERENCES accounts(id),
    auth_data TEXT,  -- –°—Ç–∞—Ä–æ–µ –ø–æ–ª–µ (–¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏)
    auth_data_encrypted TEXT,  -- –ù–æ–≤–æ–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–æ–ª–µ
    is_active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

### 2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π ‚úÖ

**–§–∞–π–ª:** `backend/project/app/db/models/user.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
- –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω—ã relationships `tonnel_accounts` –∏ `tonnel_nfts` –≤ –º–æ–¥–µ–ª–∏ User
- –†–∞—Å–∫–æ–º–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω relationship `tonnel_accounts` –≤ –º–æ–¥–µ–ª–∏ Account
- –£–¥–∞–ª–µ–Ω–æ —É—Å—Ç–∞—Ä–µ–≤—à–µ–µ –ø–æ–ª–µ `password` –∏–∑ –º–æ–¥–µ–ª–∏ Account

### 3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ

**Unit —Ç–µ—Å—Ç—ã (test_tonnel_encryption.py):** 3/3 –ø—Ä–æ–π–¥–µ–Ω–æ
- ‚úÖ –ú–µ—Ç–æ–¥—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è (set_auth_data/get_auth_data)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (—Ä–∞–∑–Ω—ã–µ IV –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (–ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

**–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (test_tonnel_simple.py):** 3/3 –ø—Ä–æ–π–¥–µ–Ω–æ
- ‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –≤ –ë–î (–¥–∞–Ω–Ω—ã–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã, —Å–µ–∫—Ä–µ—Ç—ã –Ω–µ –≤–∏–¥–Ω—ã)
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å (—Å—Ç–∞—Ä—ã–µ –Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è)
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (–æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–∞—é—Ç —Ä–∞–∑–Ω—ã–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)

---

## –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### Unit —Ç–µ—Å—Ç—ã

```
============================================================
–¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï –®–ò–§–†–û–í–ê–ù–ò–Ø TONNELACCOUNT
============================================================
‚úÖ PASS: –ú–µ—Ç–æ–¥—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
‚úÖ PASS: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
‚úÖ PASS: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

–ü—Ä–æ–π–¥–µ–Ω–æ: 3/3

üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!
‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ TonnelAccount.auth_data —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ!
```

### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

```
============================================================
–ò–ù–¢–ï–ì–†–ê–¶–ò–û–ù–ù–û–ï –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–ï TONNELACCOUNT
============================================================

–¢–ï–°–¢: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ TonnelAccount –≤ –ë–î
‚úì –°–æ–∑–¥–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: 888888888
‚úì –°–æ–∑–¥–∞–Ω –∞–∫–∫–∞—É–Ω—Ç: test_tonnel_simple_acc
‚úì –ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: {"token": "secret_token_123...
‚úì –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ: gAAAAABpLvyk_-32V_yb4vQegBcLf8I67SH0oRl5...
‚úì –î–∞–Ω–Ω—ã–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã (—Å–µ–∫—Ä–µ—Ç—ã –Ω–µ –≤–∏–¥–Ω—ã)
‚úì –î–∞–Ω–Ω—ã–µ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–¢–ï–°–¢: –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å
‚úì –°–æ–∑–¥–∞–Ω –∞–∫–∫–∞—É–Ω—Ç —Å–æ —Å—Ç–∞—Ä—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚úì –°—Ç–∞—Ä—ã–µ –Ω–µ–∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —á–∏—Ç–∞—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

–¢–ï–°–¢: –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
‚úì –°–æ–∑–¥–∞–Ω–æ 2 –∞–∫–∫–∞—É–Ω—Ç–∞ —Å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
‚úì –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Ä–∞–∑–Ω—ã–µ (—Ä–∞–∑–Ω—ã–µ IV)
‚úì –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ

–ü—Ä–æ–π–¥–µ–Ω–æ: 3/3

üéâ –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ!
‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ TonnelAccount.auth_data —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –ë–î!
```

---

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ê–ª–≥–æ—Ä–∏—Ç–º —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

**Fernet (AES-256 CBC + HMAC):**
- –°–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ
- 256-–±–∏—Ç–Ω—ã–π –∫–ª—é—á
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è IV (Initialization Vector)
- HMAC –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```python
from app.db.models.tonnel import TonnelAccount

# –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ —Å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º
tonnel_account = TonnelAccount(
    user_id=user_id,
    account_id=account_id
)

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ auth_data (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ)
auth_data = '{"token": "secret_token", "refresh_token": "refresh_123"}'
tonnel_account.set_auth_data(auth_data)

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î
session.add(tonnel_account)
await session.commit()

# –ü–æ–ª—É—á–µ–Ω–∏–µ auth_data (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞)
decrypted = tonnel_account.get_auth_data()
# decrypted == auth_data
```

### –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

**–õ–æ–≥–∏–∫–∞ –≤ `get_auth_data()`:**
```python
def get_auth_data(self) -> str:
    # –ï—Å–ª–∏ –µ—Å—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–µ—Ç –Ω–æ–≤—ã—Ö - –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å—Ç–∞—Ä—ã–µ
    if self.auth_data and not self.auth_data_encrypted:
        return self.auth_data
    
    # –ï—Å–ª–∏ –Ω–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö - –≤–æ–∑–≤—Ä–∞—â–∞–µ–º –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
    if not self.auth_data_encrypted:
        return ""
    
    # –†–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ–º –Ω–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
    from app.utils.security import decrypt_data
    return decrypt_data(self.auth_data_encrypted)
```

---

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—â–µ–Ω–æ:

‚úÖ **–¢–æ–∫–µ–Ω—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ Tonnel Market**
‚úÖ **Refresh —Ç–æ–∫–µ–Ω—ã**
‚úÖ **API –∫–ª—é—á–∏**
‚úÖ **–ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**

### –†–∏—Å–∫–∏ —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã:

‚ùå ~~–£—Ç–µ—á–∫–∞ —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ –∫–æ–º–ø—Ä–æ–º–µ—Ç–∞—Ü–∏–∏ –ë–î~~
‚ùå ~~–î–æ—Å—Ç—É–ø –∫ –∞–∫–∫–∞—É–Ω—Ç–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π~~
‚ùå ~~–ö—Ä–∞–∂–∞ NFT –∏ —Å—Ä–µ–¥—Å—Ç–≤~~
‚ùå ~~–ù–∞—Ä—É—à–µ–Ω–∏–µ GDPR~~

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏:

- **–£–Ω–∏–∫–∞–ª—å–Ω—ã–π IV:** –ö–∞–∂–¥–æ–µ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π IV, –¥–∞–∂–µ –¥–ª—è –æ–¥–∏–Ω–∞–∫–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **HMAC –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ó–∞—â–∏—Ç–∞ –æ—Ç –ø–æ–¥–¥–µ–ª–∫–∏ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ:** –ü–æ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–º –¥–∞–Ω–Ω—ã–º –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
- **–ó–∞—â–∏—Ç–∞ –æ—Ç –∞—Ç–∞–∫ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è:** –†–∞–∑–Ω—ã–µ IV –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞—é—Ç –∞—Ç–∞–∫–∏ replay

---

## –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ò–∑–º–µ—Ä–µ–Ω–∏—è:**
- –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ: <0.01 —Å–µ–∫
- –†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞: <0.01 —Å–µ–∫
- –î–ª–∏–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (10K —Å–∏–º–≤–æ–ª–æ–≤): <0.02 —Å–µ–∫

**–í–ª–∏—è–Ω–∏–µ:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ü–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è —á–∞—Å—Ç—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –ª–∏–Ω–µ–π–Ω–æ

---

## –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ production

### ‚úÖ –ß—Ç–æ –≥–æ—Ç–æ–≤–æ:

1. **–¢–∞–±–ª–∏—Ü—ã –ë–î:**
   - tonnel_accounts —Å–æ–∑–¥–∞–Ω–∞
   - –ú–∏–≥—Ä–∞—Ü–∏—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ (merge_tonnel_001)
   - –í—Å–µ —Å–≤—è–∑–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã

2. **–ú–æ–¥–µ–ª–∏:**
   - TonnelAccount —Å –º–µ—Ç–æ–¥–∞–º–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
   - Relationships –≤ User –∏ Account
   - –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

3. **–£—Ç–∏–ª–∏—Ç—ã:**
   - encrypt_data() –∏ decrypt_data()
   - –ö–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–Ω (ENCRYPTION_KEY)

4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - 6/6 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–π–¥–µ–Ω–æ
   - Unit —Ç–µ—Å—Ç—ã: 3/3
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã: 3/3

### üìù –ß—Ç–æ –Ω—É–∂–Ω–æ –¥–ª—è –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –Ω–∞ production:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å ENCRYPTION_KEY:**
   ```bash
   # –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –∫–ª—é—á —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –≤ production .env
   echo $ENCRYPTION_KEY
   ```

2. **–ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é:**
   ```bash
   alembic upgrade head
   ```

3. **–ú–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –¥–∞–Ω–Ω—ã–µ** (–µ—Å–ª–∏ –µ—Å—Ç—å):
   ```bash
   python migrate_sensitive_data.py
   ```

4. **–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä–æ–µ –ø–æ–ª–µ** (–ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏):
   ```bash
   # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏—é drop_old_columns_001
   alembic upgrade head
   ```

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

‚úÖ **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ TonnelAccount.auth_data –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ –∫ production**

**–î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:**
- –¢–∞–±–ª–∏—Ü—ã —Å–æ–∑–¥–∞–Ω—ã –≤ –ë–î
- –ú–µ—Ç–æ–¥—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –Ω–∞ —É—Ä–æ–≤–Ω–µ AES-256
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å –æ–±–µ—Å–ø–µ—á–µ–Ω–∞
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ–π–¥–µ–Ω—ã (6/6)
- –ú–∏–Ω–∏–º–∞–ª—å–Ω–æ–µ –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

**–ì–æ—Ç–æ–≤–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é –Ω–∞ production!** üéâ

---

## –§–∞–π–ª—ã

**–ú–æ–¥–µ–ª–∏:**
- `backend/project/app/db/models/tonnel.py` - –º–æ–¥–µ–ª–∏ Tonnel
- `backend/project/app/db/models/user.py` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ User –∏ Account

**–ú–∏–≥—Ä–∞—Ü–∏–∏:**
- `backend/project/alembic/versions/merge_heads_and_create_tonnel.py` - —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü

**–¢–µ—Å—Ç—ã:**
- `backend/tests/test_tonnel_encryption.py` - unit —Ç–µ—Å—Ç—ã
- `backend/tests/test_tonnel_simple.py` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã

**–£—Ç–∏–ª–∏—Ç—ã:**
- `backend/project/app/utils/security.py` - —Ñ—É–Ω–∫—Ü–∏–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- `backend/docs/security/ENCRYPTION_PLAN.md` - –ø–ª–∞–Ω —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- `backend/docs/security/ENCRYPTION_IMPLEMENTATION.md` - –¥–µ—Ç–∞–ª–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- `backend/docs/security/TONNEL_ENCRYPTION_RESULTS.md` - —ç—Ç–æ—Ç —Ñ–∞–π–ª
