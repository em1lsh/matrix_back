# üéÅ Matrix Backend

FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å Telegram –±–æ—Ç–æ–º –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å TON –±–ª–æ–∫—á–µ–π–Ω–æ–º –∏ NFT –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–º.

**–í–µ—Ä—Å–∏—è:** 2.0 (Clean Architecture)  

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:
```bash
# 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env

# 2. –ó–∞–ø—É—Å–∫ –≤ Docker
docker compose up --build

# 3. –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
docker compose run --rm app poetry run alembic upgrade head
```

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ –Ω–∞ `http://localhost:8000`

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [QUICK_START.md](QUICK_START.md)

---

## ‚úÖ –°—Ç–∞—Ç—É—Å –º–∏–≥—Ä–∞—Ü–∏–∏

**–ú–∏–≥—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —É—Å–ø–µ—à–Ω–æ!**

- ‚úÖ **62 —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞** –º–∏–≥—Ä–∏—Ä–æ–≤–∞–Ω–æ —Å –∏–¥–µ–Ω—Ç–∏—á–Ω–æ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–æ–π (100%)
- ‚úÖ –í—Å–µ –º–æ–¥—É–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã —É–ª—É—á—à–µ–Ω–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ø–æ–ª–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

**–î–µ—Ç–∞–ª–∏:**
- üìä [–ü–æ–ª–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤](../only_me/ENDPOINT_BUSINESS_LOGIC_COMPARISON.md) - ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–æ
- üìù [–ú–∞–ø–ø–∏–Ω–≥ API –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞](docs/migration/FRONTEND_API_MAPPING.md) - ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–æ
- üîß [–ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞](docs/migration/FRONTEND_QUICK_FIX.md) - ‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–æ
---

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

### üéØ –ì–ª–∞–≤–Ω–æ–µ:
- **[docs/README.md](docs/README.md)** - –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –≤—Å–µ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
- **[QUICK_START.md](QUICK_START.md)** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **[LOCAL_SETUP.md](LOCAL_SETUP.md)** - –î–µ—Ç–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è:
- **[–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤](../only_me/ENDPOINT_BUSINESS_LOGIC_COMPARISON.md)** - –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –≤—Å–µ—Ö 56 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- **[–ú–∞–ø–ø–∏–Ω–≥ API](docs/migration/FRONTEND_API_MAPPING.md)** - –ò–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- **[–ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è](docs/migration/FRONTEND_QUICK_FIX.md)** - –ß—Ç–æ –Ω—É–∂–Ω–æ –ø–æ–ø—Ä–∞–≤–∏—Ç—å –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ
- **[–ù–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã](docs/migration/MISSING_ENDPOINTS_IMPLEMENTED.md)** - –ß—Ç–æ –±—ã–ª–æ –¥–æ–±–∞–≤–ª–µ–Ω–æ

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- **[–û–±–∑–æ—Ä –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã](docs/architecture/ARCHITECTURE_OVERVIEW.md)** - Clean Architecture
- **[–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏](docs/architecture/ARCHITECTURE_RECOMMENDATIONS.md)** - –ö–∞–∫ —É–ª—É—á—à–∏—Ç—å

### üìù –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
- **[–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](docs/logging/LOGGING.md)** - Loguru + Loki
- **[Unit of Work](docs/database/UOW_USAGE.md)** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
- **[UseCase –ø—Ä–∏–º–µ—Ä—ã](docs/api/USE_CASE_EXAMPLE.md)** - –ö–∞–∫ –ø–∏—Å–∞—Ç—å –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
backend/
‚îú‚îÄ‚îÄ docs/                       # üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ migration/             # –ê–Ω–∞–ª–∏–∑ –º–∏–≥—Ä–∞—Ü–∏–∏ –∏ –º–∞–ø–ø–∏–Ω–≥ API
‚îÇ   ‚îú‚îÄ‚îÄ architecture/          # –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ logging/               # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
‚îÇ   ‚îú‚îÄ‚îÄ database/              # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îî‚îÄ‚îÄ README.md              # –ù–∞–≤–∏–≥–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ project/app/               # üíª –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ modules/               # –ë–∏–∑–Ω–µ—Å-–º–æ–¥—É–ª–∏ (Clean Architecture)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ users/            # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ accounts/         # Telegram –∞–∫–∫–∞—É–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ nft/              # NFT –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ market/           # –ú–∞—Ä–∫–µ—Ç –∏ —Ñ–∏–ª—å—Ç—Ä—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ offers/           # –û—Ñ—Ñ–µ—Ä—ã –Ω–∞ NFT
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ presale/          # –ü—Ä–µ–¥–ø—Ä–æ–¥–∞–∂–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auctions/         # –ê—É–∫—Ü–∏–æ–Ω—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ trades/           # –û–±–º–µ–Ω NFT
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ channels/         # –ü—Ä–æ–¥–∞–∂–∞ –∫–∞–Ω–∞–ª–æ–≤
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ db/                    # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models.py         # SQLAlchemy –º–æ–¥–µ–ª–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ uow.py            # Unit of Work
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ utils/                 # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ logger.py         # Loguru (structured logging)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ locks.py          # Distributed locks (Redis)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ retry.py          # Retry –º–µ—Ö–∞–Ω–∏–∑–º
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ wallet/                # TON Blockchain
‚îÇ   ‚îú‚îÄ‚îÄ account/               # Telegram API
‚îÇ   ‚îî‚îÄ‚îÄ configs.py             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ
‚îú‚îÄ‚îÄ tests/                     # üß™ –¢–µ—Å—Ç—ã
‚îú‚îÄ‚îÄ docker/                    # üê≥ Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ pyproject.toml            # Poetry –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
```

---

## üõ†Ô∏è –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:
```bash
# –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫
poetry install
cd project && poetry run uvicorn run:app --reload

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
poetry add package-name
poetry update
```

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
```bash
# –ú–∏–≥—Ä–∞—Ü–∏–∏
poetry run alembic upgrade head
poetry run alembic revision --autogenerate -m "description"
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤
poetry run pytest

# –° –ø–æ–∫—Ä—ã—Ç–∏–µ–º
poetry run pytest --cov=app
```

### Docker:
```bash
# –ó–∞–ø—É—Å–∫
docker compose up --build

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞
docker compose down

# –õ–æ–≥–∏
docker compose logs -f app
```

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

**Clean Architecture** —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏:

```
Router ‚Üí UseCase ‚Üí Service ‚Üí Repository ‚Üí Models
```

**–ö–ª—é—á–µ–≤—ã–µ –ø–∞—Ç—Ç–µ—Ä–Ω—ã:**
- ‚úÖ **Unit of Work** - –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ **Repository** - –∏–∑–æ–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
- ‚úÖ **Distributed Locks** - –∑–∞—â–∏—Ç–∞ –æ—Ç race conditions (Redis)
- ‚úÖ **Domain Exceptions** - –±–∏–∑–Ω–µ—Å-–æ—à–∏–±–∫–∏ –≤–º–µ—Å—Ç–æ HTTP
- ‚úÖ **Structured Logging** - Loguru —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- ‚úÖ **Idempotency Keys** - –∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **Retry Mechanism** - —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º

**–£–ª—É—á—à–µ–Ω–∏—è –ø–æ —Å—Ä–∞–≤–Ω–µ–Ω–∏—é —Å–æ —Å—Ç–∞—Ä—ã–º –±—ç–∫–µ–Ω–¥–æ–º:**
- üîí Distributed locks –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- üìÑ –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö —Å–ø–∏—Å–∫–æ–≤ (15+ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤)
- üîÅ Idempotency keys –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- üîÑ Retry –º–µ—Ö–∞–Ω–∏–∑–º –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤
- üéØ SELECT FOR UPDATE –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∑–∞–ø–∏—Å–µ–π
- üìä Structured logging —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º

**–ü–æ–¥—Ä–æ–±–Ω–µ–µ:** [docs/architecture/ARCHITECTURE_OVERVIEW.md](docs/architecture/ARCHITECTURE_OVERVIEW.md)

---

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

### Backend:
- **Python 3.10+**
- **FastAPI** - Web framework
- **SQLAlchemy 2.0** - ORM —Å Mapped —Ç–∏–ø–∞–º–∏
- **Alembic** - –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î
- **Pydantic** - –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:
- **PostgreSQL** - –û—Å–Ω–æ–≤–Ω–∞—è –ë–î
- **Redis** - –ö–µ—à –∏ distributed locks

### Blockchain:
- **TON** - Blockchain
- **TonSDK** - Python SDK –¥–ª—è TON

### Telegram:
- **Aiogram** - Telegram Bot framework

### –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
- **Docker** - –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è
- **Poetry** - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
- **Loguru** - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
- **Grafana Loki** - –ê–≥—Ä–µ–≥–∞—Ü–∏—è –ª–æ–≥–æ–≤

---

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –ó–∞—â–∏—Ç–∞ –æ—Ç race conditions:
- ‚úÖ **Distributed locks** (Redis) –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ **SELECT FOR UPDATE** –¥–ª—è –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏ –∑–∞–ø–∏—Å–µ–π –≤ –ë–î
- ‚úÖ **Unit of Work** –¥–ª—è –∞—Ç–æ–º–∞—Ä–Ω–æ—Å—Ç–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:
- ‚úÖ **Idempotency keys** –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤)
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤** –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º —Å—É—â–Ω–æ—Å—Ç–µ–π

### –í–∞–ª–∏–¥–∞—Ü–∏—è –∏ –∑–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö:
- ‚úÖ **Pydantic** –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ **SQLAlchemy** –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç SQL injection
- ‚úÖ **Domain Exceptions** –¥–ª—è –±–∏–∑–Ω–µ—Å-–æ—à–∏–±–æ–∫
- ‚úÖ **TON address validation** –¥–ª—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º:
- ‚úÖ **Retry mechanism** –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö –≤—ã–∑–æ–≤–æ–≤ (TON blockchain)
- ‚úÖ **Graceful degradation** –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ **Structured logging** –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø—Ä–æ–±–ª–µ–º

---

## üìä –°—Ç–∞—Ç—É—Å –º–æ–¥—É–ª–µ–π

| –ú–æ–¥—É–ª—å | –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã | –°—Ç–∞—Ç—É—Å | –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ |
|--------|-----------|--------|---------------|
| Users | 4/4 | ‚úÖ 100% | –ò–¥–µ–Ω—Ç–∏—á–Ω–∞ + –ø–∞–≥–∏–Ω–∞—Ü–∏—è |
| Accounts | 7/7 | ‚úÖ 100% | –ò–¥–µ–Ω—Ç–∏—á–Ω–∞ + –≤—Å–µ Telegram API |
| NFT | 7/7 | ‚úÖ 100% | –ò–¥–µ–Ω—Ç–∏—á–Ω–∞ + locks + –ø–∞–≥–∏–Ω–∞—Ü–∏—è |
| Market | 10/10 | ‚úÖ 100% | –ò–¥–µ–Ω—Ç–∏—á–Ω–∞ + idempotency + retry |
| Offers | 5/5 | ‚úÖ 100% | –ò–¥–µ–Ω—Ç–∏—á–Ω–∞ + locks + –ø–∞–≥–∏–Ω–∞—Ü–∏—è |
| Presale | 5/5 | ‚úÖ 100% | –ò–¥–µ–Ω—Ç–∏—á–Ω–∞ + –ø–∞–≥–∏–Ω–∞—Ü–∏—è |
| Auctions | 6/6 | ‚úÖ 100% | –ò–¥–µ–Ω—Ç–∏—á–Ω–∞ + locks + –ø–∞–≥–∏–Ω–∞—Ü–∏—è |
| Trades | 11/11 | ‚úÖ 100% | –ò–¥–µ–Ω—Ç–∏—á–Ω–∞ + –ø–∞–≥–∏–Ω–∞—Ü–∏—è |
| Channels | 7/7 | ‚úÖ 100% | –ò–¥–µ–Ω—Ç–∏—á–Ω–∞ + –ø–∞–≥–∏–Ω–∞—Ü–∏—è |

**–ò—Ç–æ–≥–æ:** 62/62 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (100%)

**–î–µ—Ç–∞–ª—å–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ:** [../only_me/ENDPOINT_BUSINESS_LOGIC_COMPARISON.md](../only_me/ENDPOINT_BUSINESS_LOGIC_COMPARISON.md)

---

## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—å—é—Ü–∏—è

1. –ü—Ä–æ—á–∏—Ç–∞–π [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é](docs/README.md)
2. –ü—Ä–æ—á–∏—Ç–∞–π [–ø—Ä–∞–≤–∏–ª–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](.kiro/steering/documentation-rules.md)
3. –°–æ–∑–¥–∞–π feature branch
4. –°–¥–µ–ª–∞–π –∏–∑–º–µ–Ω–µ–Ω–∏—è
5. –ù–∞–ø–∏—à–∏ —Ç–µ—Å—Ç—ã
6. –°–æ–∑–¥–∞–π Pull Request

---

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞

- üìö [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è](docs/README.md)
- üêõ [Issues](https://github.com/your-repo/issues)
- üí¨ –ß–∞—Ç –∫–æ–º–∞–Ω–¥—ã

---

## üìù –õ–∏—Ü–µ–Ω–∑–∏—è

Proprietary - –≤—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.

---

## üéØ –ö–ª—é—á–µ–≤—ã–µ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:
- ‚úÖ –í—Å–µ 56 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —Ä–∞–±–æ—Ç–∞—é—Ç –∏–¥–µ–Ω—Ç–∏—á–Ω–æ —Å—Ç–∞—Ä–æ–º—É –±—ç–∫–µ–Ω–¥—É
- ‚úÖ –í—Å–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ –Ω–∞ –º–µ—Å—Ç–µ
- ‚úÖ –í—Å–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã
- ‚úÖ –í—Å–µ –∫–æ–º–∏—Å—Å–∏–∏ —Ä–∞—Å—Å—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –î–æ–±–∞–≤–ª–µ–Ω—ã —É–ª—É—á—à–µ–Ω–∏—è:
- üîí **Distributed locks** - 5 –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∑–∞—â–∏—â–µ–Ω—ã
- üìÑ **–ü–∞–≥–∏–Ω–∞—Ü–∏—è** - 15+ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç limit/offset
- üîÅ **Idempotency** - –∑–∞—â–∏—Ç–∞ –æ—Ç –¥–≤–æ–π–Ω—ã—Ö –ø–ª–∞—Ç–µ–∂–µ–π
- üîÑ **Retry** - —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ —Å–±–æ—è–º blockchain
- üéØ **SELECT FOR UPDATE** - –∑–∞—â–∏—Ç–∞ –æ—Ç race conditions –≤ –ë–î
- üìä **Structured logging** - –¥–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

### –£–ª—É—á—à–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
- üèóÔ∏è **Clean Architecture** - —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏
- üß™ **–¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –ø–∏—Å–∞—Ç—å unit-—Ç–µ—Å—Ç—ã
- üìù **–ß–∏—Ç–∞–µ–º–æ—Å—Ç—å** - –ø–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞
- üîß **–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –Ω–æ–≤—ã–µ —Ñ–∏—á–∏

---

## üó∫Ô∏è –î–∞–ª—å–Ω–µ–π—à–∏–µ –ø–ª–∞–Ω—ã

### üìã –ë–ª–∏–∂–∞–π—à–∏–µ –∑–∞–¥–∞—á–∏ (1-2 –Ω–µ–¥–µ–ª–∏)

#### 1. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –í—ã—Å–æ–∫–∏–π)
- [ ] **Unit —Ç–µ—Å—Ç—ã** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö use cases
  - Presale: —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ü–µ–Ω—ã, –ø–æ–∫—É–ø–∫–∞
  - Auctions: —Å—Ç–∞–≤–∫–∏, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
  - Offers: –ø—Ä–∏–Ω—è—Ç–∏–µ, –∫–æ–º–∏—Å—Å–∏—è
  - Market: –≤—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤ —Å idempotency
- [ ] **Integration —Ç–µ—Å—Ç—ã** –¥–ª—è API endpoints
- [ ] **E2E —Ç–µ—Å—Ç—ã** –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Ñ–ª–æ—É
  - –ü–æ–∫—É–ø–∫–∞ NFT
  - –û–±–º–µ–Ω —á–µ—Ä–µ–∑ trades
  - –ü–æ–∫—É–ø–∫–∞ –∫–∞–Ω–∞–ª–∞

#### 2. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å
- [ ] **Grafana –¥–∞—à–±–æ—Ä–¥—ã**
  - –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
  - –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
  - –û—à–∏–±–∫–∏ –∏ –∞–ª–µ—Ä—Ç—ã
- [ ] **Loki –¥–ª—è –ª–æ–≥–æ–≤**
  - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
  - –ü–æ–∏—Å–∫ –ø–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–º –ª–æ–≥–∞–º
- [ ] **–ê–ª–µ—Ä—Ç—ã**
  - –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
  - –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–ª–∞–Ω—Å–æ–º
  - –°–±–æ–∏ blockchain

#### 3. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- [ ] **OpenAPI/Swagger** —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
- [ ] **–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤** –¥–ª—è –∫–∞–∂–¥–æ–≥–æ endpoint
- [ ] **–û–ø–∏—Å–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏** –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- [ ] **Changelog** –∏–∑–º–µ–Ω–µ–Ω–∏–π API

### üöÄ –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (1-2 –º–µ—Å—è—Ü–∞)

#### 4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**
  - Redis –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
  - –ö—ç—à —Ñ–∏–ª—å—Ç—Ä–æ–≤ –º–∞—Ä–∫–µ—Ç–∞
- [ ] **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**
  - –ê–Ω–∞–ª–∏–∑ slow queries
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
- [ ] **Connection pooling**
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É–ª–æ–≤ –¥–ª—è PostgreSQL
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—É–ª–æ–≤ –¥–ª—è Redis

#### 5. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- [ ] **Rate limiting** –¥–ª—è –≤—Å–µ—Ö endpoints
- [ ] **CORS** –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
- [ ] **–ê—É–¥–∏—Ç –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏**
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ SQL injection
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ XSS
  - –ü—Ä–æ–≤–µ—Ä–∫–∞ CSRF

#### 6. CI/CD
- [ ] **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã** –≤ pipeline
- [ ] **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –¥–µ–ø–ª–æ–π** –Ω–∞ staging
- [ ] **Blue-green deployment** –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞
- [ ] **Rollback –º–µ—Ö–∞–Ω–∏–∑–º**

### üéØ –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ –∑–∞–¥–∞—á–∏ (3-6 –º–µ—Å—è—Ü–µ–≤)

#### 7. –ú–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] **Horizontal scaling**
  - Stateless –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (–≥–æ—Ç–æ–≤–æ)
  - Load balancer
  - Multiple instances
- [ ] **Database sharding** (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è)
- [ ] **Microservices** (–µ—Å–ª–∏ –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è)
  - –í—ã–¥–µ–ª–µ–Ω–∏–µ blockchain –º–æ–¥—É–ª—è
  - –í—ã–¥–µ–ª–µ–Ω–∏–µ notifications –º–æ–¥—É–ª—è

#### 8. –ù–æ–≤—ã–µ —Ñ–∏—á–∏
- [ ] **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞** –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –ò—Å—Ç–æ—Ä–∏—è —Ü–µ–Ω
  - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–¥–µ–ª–æ–∫
  - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
- [ ] **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è**
  - Email —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  - Push —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
  - Telegram –±–æ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] **API –¥–ª—è –ø–∞—Ä—Ç–Ω–µ—Ä–æ–≤**
  - –ü—É–±–ª–∏—á–Ω–æ–µ API
  - Webhooks
  - Rate limits

### üìä –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

**–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- Response time < 200ms (95 percentile)
- Throughput > 1000 RPS
- Database queries < 50ms

**–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å:**
- Uptime > 99.9%
- Error rate < 0.1%
- Zero data loss

**–ö–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞:**
- Test coverage > 80%
- Zero critical bugs
- Code review –¥–ª—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

---

## ü§ù –ö–æ–Ω—Ç—Ä–∏–±—å—é—Ü–∏—è

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã:
1. –ü—Ä–æ—á–∏—Ç–∞–π [–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é](docs/README.md)
2. –ò–∑—É—á–∏ [–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É](docs/architecture/ARCHITECTURE_OVERVIEW.md)
3. –°–ª–µ–¥—É–π [–ø—Ä–∞–≤–∏–ª–∞–º –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](.kiro/steering/documentation-rules.md)
4. –°–æ–∑–¥–∞–π feature branch
5. –ù–∞–ø–∏—à–∏ —Ç–µ—Å—Ç—ã
6. –°–æ–∑–¥–∞–π Pull Request

---

*README –æ–±–Ω–æ–≤–ª—ë–Ω 6 –¥–µ–∫–∞–±—Ä—è 2025 –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏*
